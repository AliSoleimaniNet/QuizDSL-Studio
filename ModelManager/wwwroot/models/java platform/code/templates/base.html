<!DOCTYPE html>
<html dir='rtl' lang='fa'>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<script src='https://cdn.tailwindcss.com'></script>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css'>
<link rel='icon' href='/static/images/java_logo.png' type='image/vnd.microsoft.icon'>
<link rel='stylesheet' href='/static/css/style.css'>
<link href='https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css' rel='stylesheet' type='text/css' />
<title>Java Hub</title>
</head>
<body class='min-h-screen flex flex-col animate-fade-in'>
  <nav id='main-nav' class='sticky top-0 z-50 glass'>
    <div class='container mx-auto px-6 py-3 flex justify-between items-center'>
      <a href='/' class='flex items-center gap-3'>
        <img src='/static/images/java_logo.png' class='h-8 w-auto'>
        <span class='text-lg font-black' style='color: var(--primary)'>Java Hub</span>
      </a>
      <div class='flex items-center gap-6 text-sm'>
        <a href='/' style='color: var(--text)' class='opacity-80 hover:opacity-100 transition'>صفحه اصلی</a>
        
        <a href='/admin' id='nav-admin-link' class='hidden font-bold transition-all px-3 py-2 rounded-xl' 
           style='background: color-mix(in srgb, var(--primary), transparent 90%); 
                  color: var(--primary); 
                  border: 1px solid color-mix(in srgb, var(--primary), transparent 80%);'>
           <i class='fa-solid fa-shield-halved ml-1'></i> پنل مدیریت
        </a>
        <div id='auth-guest' class='flex'>
          <a href='/login' class='px-5 py-2 rounded-full border border-[var(--primary)] text-[var(--primary)] hover:bg-[var(--primary)] hover:text-[var(--bg)] transition-all'>ورود</a>
        </div>
        <div id='auth-user' class='hidden relative'>
          <button id='user-menu-btn' class='w-10 h-10 rounded-full flex items-center justify-center text-white shadow-lg' style='background: var(--primary)'>
            <i class='fa-solid fa-user'></i>
          </button>
          <div id='user-dropdown' class='hidden absolute left-0 top-14 w-56 rounded-2xl shadow-2xl overflow-hidden' 
               style='background-color: var(--nav-bg); border: 1px solid var(--card-border); backdrop-filter: blur(20px);'>
             <div class='p-4 border-b' style='border-color: var(--card-border)'>
               <p class='text-[10px] opacity-70 mb-1' style='color: var(--text)'>حساب کاربری</p>
               <p id='user-name-display' class='font-bold text-sm truncate' style='color: var(--text)'></p>
             </div>
             <a href='/my-results' 
                class='block w-full text-right px-4 py-3 text-sm transition-all duration-200 flex items-center gap-2 hover:bg-[var(--primary)] hover:text-[var(--bg)]' 
                style='color: var(--text)'>
               <i class='fa-solid fa-square-poll-vertical'></i> کارنامه من
             </a>
             <a href='/logout' id='logout-btn' class='block w-full text-right px-4 py-3 text-sm text-red-500 hover:bg-red-500 hover:text-white transition-colors flex items-center gap-2'>
               <i class='fa-solid fa-arrow-right-from-bracket'></i> خروج
             </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
  <main class='flex-grow container mx-auto py-8 px-4'>{% block content %}{% endblock %}</main>
  <footer class='py-8 border-t text-center' style='border-color: var(--card-border); color: var(--text); opacity: 0.5;'>
    <p class='text-xs'>© ۲۰۲۶ - طراحی شده با سیستم هوشمند Java Hub</p>
  </footer>
  {% block modals %}{% endblock %}
  <script src='/static/js/auth.js'></script>
  <script>
    window.onscroll = function() {
      const nav = document.getElementById('main-nav');
      if (window.scrollY > 20) {
        nav.classList.add('nav-scrolled');
      } else {
        nav.classList.remove('nav-scrolled');
      }
    };
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>